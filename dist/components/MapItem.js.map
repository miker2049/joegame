{"version":3,"sources":["../../src/components/MapItem.ts"],"names":["MapItem","scenemap","x","y","t_obj","setOrigin","itemData","joegameData","items","name","setTexture","texture","frame","setScale","scale","callback","scene","registry","get","push","notify","sparkles","destroy","activateOverlap","player","add","particles","particleTexture","sparkly","activateSparkles","tweens","targets","ease","loop","duration","yoyo","createEmitter","setPosition","width","height","setBlendMode","Phaser","BlendModes","ADD","setSpeed","setLifespan","OverlapArea"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;AAEA;;AAEA;;;;;;AAGA;AACA;AACA;IACqBA,O;;;;;AAGjB,mBAAYC,QAAZ,EAA+BC,CAA/B,EAA0CC,CAA1C,EAAqDC,KAArD,EAAiG;AAAA;;AAAA;AAC7F,8BAAMH,QAAN,EAAgBC,CAAhB,EAAmBC,CAAnB,EAAsBC,KAAtB;;AACA,UAAKC,SAAL,CAAe,CAAf,EAAiB,CAAjB;;AACA,QAAMC,QAAQ,GAAGC,yBAAYC,KAAZ,CAAkB,MAAKC,IAAvB,CAAjB;;AACA,UAAKC,UAAL,CAAgBJ,QAAQ,CAACK,OAAzB,EAAiCL,QAAQ,CAACM,KAAT,IAAkB,CAAnD,EAAsDC,QAAtD,CAA+DP,QAAQ,CAACQ,KAAT,IAAkB,CAAjF;;AACA,UAAKC,QAAL,GAAc,YAAI;AACd,YAAKC,KAAL,CAAWC,QAAX,CAAoBC,GAApB,CAAwB,WAAxB,EAAqCC,IAArC,CAA0C,MAAKV,IAA/C;;AACA,YAAKO,KAAL,CAAWI,MAAX,yBAAmC,MAAKX,IAAxC;;AACA,YAAKY,QAAL,CAAcC,OAAd;;AACA,YAAKA,OAAL;AACH,KALD;;AAMA,UAAKC,eAAL,CAAqB,MAAKP,KAAL,CAAWQ,MAAhC;;AACA,UAAKH,QAAL,GAAgB,MAAKL,KAAL,CAAWS,GAAX,CAAeC,SAAf,CAAyBpB,QAAQ,CAACqB,eAAT,IAA0B,iBAAnD,CAAhB;;AACA,QAAIrB,QAAQ,CAACsB,OAAb,EAAqB;AACjB,YAAKC,gBAAL;AACH;;AACD,UAAKb,KAAL,CAAWc,MAAX,CAAkBL,GAAlB,CAAsB;AAClBM,MAAAA,OAAO,EAAE,6CADS;AAElB5B,MAAAA,CAAC,EAAE,MAAKA,CAAL,GAAO,CAFQ;AAGlB6B,MAAAA,IAAI,EAAE,MAHY;AAIlBC,MAAAA,IAAI,EAAE,CAAC,CAJW;AAKlBC,MAAAA,QAAQ,EAAE,IALQ;AAMlBC,MAAAA,IAAI,EAAE;AANY,KAAtB;;AAhB6F;AAwBhG;;;;WAED,4BAAkB;AACd,WAAKd,QAAL,CAAce,aAAd,CAA4B,EAA5B,EACKC,WADL,CACiB,KAAKnC,CAAL,GAAO,KAAKoC,KAAL,GAAW,CADnC,EACsC,KAAKnC,CAAL,GAAO,KAAKoC,MAAL,GAAY,CADzD,EAEKC,YAFL,CAEkBC,MAAM,CAACC,UAAP,CAAkBC,GAFpC,EAGKC,QAHL,CAGc,EAHd,EAIC/B,QAJD,CAIU,GAJV,EAKCgC,WALD,CAKa,GALb;AAMH;;;EApCgCC,qB","sourcesContent":["import 'phaser'\nimport BaseScene from './BaseScene';\nimport OverlapArea from './OverlapArea';\nimport Level from './Level';\nimport { joegameData } from './joegameData';\nimport SceneMap from './SceneMap';\n\n/**\n * MapItems are MapObjects the player picks up and is added to inventory\n */\nexport default class MapItem extends OverlapArea{\n    scene: Level;\n    sparkles: Phaser.GameObjects.Particles.ParticleEmitterManager;\n    constructor(scenemap: SceneMap,x: number, y: number, t_obj: Phaser.Types.Tilemaps.TiledObject  ) {\n        super(scenemap, x, y, t_obj);\n        this.setOrigin(0,1)\n        const itemData = joegameData.items[this.name];\n        this.setTexture(itemData.texture,itemData.frame || 0).setScale(itemData.scale || 1)\n        this.callback=()=>{\n            this.scene.registry.get('Inventory').push(this.name);\n            this.scene.notify(`you picked up ${this.name}`)\n            this.sparkles.destroy()\n            this.destroy()\n        }\n        this.activateOverlap(this.scene.player);\n        this.sparkles = this.scene.add.particles(itemData.particleTexture||'yellow-particle');\n        if (itemData.sparkly){\n            this.activateSparkles()\n        }\n        this.scene.tweens.add({\n            targets: [this],\n            y: this.y-1,\n            ease: 'Sine',\n            loop: -1,\n            duration: 2000,\n            yoyo: true\n        })\n    }\n\n    activateSparkles(){\n        this.sparkles.createEmitter({})\n            .setPosition(this.x+this.width/2, this.y-this.height/2)\n            .setBlendMode(Phaser.BlendModes.ADD)\n            .setSpeed(10)\n        .setScale(0.5)\n        .setLifespan(500)\n    }\n}\n"],"file":"MapItem.js"}
{"version":3,"sources":["../../src/components/TweetConvo.ts"],"names":["urlRegex","TweetConvo","chars","convo","users","level","conv","charIndex","findIndex","val","username","length","text","replace","jumpUp","forEach","char","setDepth","defaults","charDepth","speak","talkingSpeed","voxbox","close","reverse","setTimeout","runConvo"],"mappings":";;;;;;;;;;;;;;;;;;;AAKA;;AAKA,IAAMA,QAAQ,GAAG,uLAAjB;;IACqBC,U;AAIjB;AAEA,sBAAYC,KAAZ,EAAiCC,KAAjC,EAAiDC,KAAjD,EAAkEC,KAAlE,EAA2F;AAAA;AACvF,SAAKH,KAAL,GAAaA,KAAb;AACA,SAAKC,KAAL,GAAaA,KAAb;AACA,SAAKC,KAAL,GAAaA,KAAb;AACH;;;;;8FAED;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEmBE,0BAAAA,IAFnB;AAGcC,0BAAAA,SAHd,GAG0B,KAAI,CAACH,KAAL,CAAWI,SAAX,CAAqB,UAACC,GAAD,EAAS;AAC5C,mCAAOA,GAAG,KAAKH,IAAI,CAACI,QAApB;AACH,2BAFiB,IAEb,KAAI,CAACR,KAAL,CAAWS,MALxB;AAMYC,0BAAAA,IANZ,GAMmBN,IAAI,CAACM,IAAL,CAAUC,OAAV,CAAkB,UAAlB,EAA8B,EAA9B,CANnB;AAOQD,0BAAAA,IAAI,GAAGA,IAAI,CAACC,OAAL,CAAab,QAAb,EAAuB,EAAvB,CAAP;AACAY,0BAAAA,IAAI,GAAGA,IAAI,CAACC,OAAL,CAAa,QAAb,EAAuB,EAAvB,CAAP;;AACA,0BAAA,KAAI,CAACX,KAAL,CAAWK,SAAX,EAAsBO,MAAtB;;AACA,0BAAA,KAAI,CAACZ,KAAL,CAAWa,OAAX,CAAmB,UAAAC,IAAI;AAAA,mCAAIA,IAAI,CAACC,QAAL,CAAcC,kBAASC,SAAvB,CAAJ;AAAA,2BAAvB;;AACA,0BAAA,KAAI,CAACjB,KAAL,CAAWK,SAAX,EAAsBU,QAAtB,CAA+B,EAA/B;;AAXR;AAAA,iCAYc,KAAI,CAACf,KAAL,CAAWK,SAAX,EAAsBa,KAAtB,CAA4BR,IAA5B,EAAkCM,kBAASG,YAA3C,CAZd;;AAAA;AAaQ,0BAAA,KAAI,CAACnB,KAAL,CAAWK,SAAX,EAAsBe,MAAtB,CAA6BC,KAA7B;;AAbR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yDAE2B,KAAKpB,KAAL,CAAWqB,OAAX,EAF3B;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAeIC,gBAAAA,UAAU,CAAC;AAAA,yBAAM,KAAI,CAACC,QAAL,EAAN;AAAA,iBAAD,EAAwB,IAAxB,CAAV;;AAfJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O","sourcesContent":["import { ILevelComponents } from '../ILevel'\nimport { createNPCMachine } from './NPCMachine'\nimport { ICharacter } from '../ICharacter'\nimport randomInterestSet from '../utils/randomInterestSet'\nimport { interpret } from 'xstate'\nimport defaults from '../defaults'\ninterface tweet {\n    text: string\n    username: string\n}\nconst urlRegex = /((([A-Za-z]{3,9}:(?:\\/\\/)?)(?:[\\-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9\\.\\-]+|(?:www\\.|[\\-;:&=\\+\\$,\\w]+@)[A-Za-z0-9\\.\\-]+)((?:\\/[\\+~%\\/\\.\\w\\-_]*)?\\??(?:[\\-\\+=&;%@\\.\\w_]*)#?(?:[\\.\\!\\/\\\\\\w]*))?)/g\nexport default class TweetConvo {\n    chars: ICharacter[]\n    convo: tweet[]\n    users: string[]\n    // box:\n\n    constructor(chars: ICharacter[], convo: tweet[], users: string[], level: ILevelComponents) {\n        this.chars = chars\n        this.convo = convo\n        this.users = users\n    }\n\n    async runConvo(): Promise<void> {\n\n        for await (let conv of this.convo.reverse()) {\n            const charIndex = this.users.findIndex((val) => {\n                return val === conv.username\n            }) % this.chars.length\n            let text = conv.text.replace(/@[^\\s]*/g, '')\n            text = text.replace(urlRegex, '')\n            text = text.replace(/\\s\\s+/g, '')\n            this.chars[charIndex].jumpUp()\n            this.chars.forEach(char => char.setDepth(defaults.charDepth))\n            this.chars[charIndex].setDepth(10)\n            await this.chars[charIndex].speak(text, defaults.talkingSpeed)\n            this.chars[charIndex].voxbox.close()\n        }\n        setTimeout(() => this.runConvo(), 5000)\n    }\n}\n"],"file":"TweetConvo.js"}
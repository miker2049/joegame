{"version":3,"sources":["../../src/components/TV.ts"],"names":["TV","scene","x","y","joegameData","textures","tv","video","initVideo","setPipeline","globalPipeline","physics","world","enableBody","Phaser","Physics","Arcade","STATIC_BODY","body","setSize","width","height","setOffset","registerColliders","setDepth","events","on","initColliders","addCollider","npcGroup","player","vid","active","destroy","add","play","setDisplaySize","tiles","map","tilemap","getTilesWithinWorldXY","cameras","main","mainLayer","forEach","tile","pathfinder","finder","avoidAdditionalPoint","console","log","GameObjects","Sprite"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;AAGA;;;;;;IAGqBA,E;;;;;AAIjB,cAAYC,KAAZ,EAA6BC,CAA7B,EAAwCC,CAAxC,EAAmD;AAAA;;AAAA;AAC/C,8BAAMF,KAAN,EAAaC,CAAb,EAAgBC,CAAhB,EAAmBC,yBAAYC,QAAZ,CAAqBC,EAAxC;AACA,UAAKC,KAAL,GAAa,MAAKC,SAAL,CAAe,YAAf,CAAb;;AACA,UAAKD,KAAL,CAAWE,WAAX,CAAuBL,yBAAYM,cAAnC;;AACA,UAAKD,WAAL,CAAiBL,yBAAYM,cAA7B;;AACA,UAAKT,KAAL,CAAWU,OAAX,CAAmBC,KAAnB,CAAyBC,UAAzB,8CAA0CC,MAAM,CAACC,OAAP,CAAeC,MAAf,CAAsBC,WAAhE;;AACA,UAAKC,IAAL,CAAUC,OAAV,CAAkB,MAAKC,KAAL,GAAW,CAA7B,EAA+B,MAAKC,MAAL,GAAY,CAA3C,EAA8CC,SAA9C,CAAwD,CAAxD,EAA0D,EAA1D;;AACA,UAAKC,iBAAL;;AACA,UAAKC,QAAL,CAAc,GAAd;;AACA,UAAKjB,KAAL,CAAWiB,QAAX,CAAoB,GAApB;;AAEA,UAAKvB,KAAL,CAAWwB,MAAX,CAAkBC,EAAlB,CAAqB,QAArB,EAA8B,YAAI;AAAC,YAAKC,aAAL;AAAqB,KAAxD;;AAX+C;AAYlD;;;;WAED,yBAAe;AACX,WAAK1B,KAAL,CAAWU,OAAX,CAAmBC,KAAnB,CAAyBgB,WAAzB,CAAqC,IAArC,EAA0C,KAAK3B,KAAL,CAAW4B,QAArD;AACA,WAAK5B,KAAL,CAAWU,OAAX,CAAmBC,KAAnB,CAAyBgB,WAAzB,CAAqC,IAArC,EAA0C,KAAK3B,KAAL,CAAW6B,MAArD;AACH;;;WAED,mBAAUC,GAAV,EAAiD;AAAA;;AAC7C,yBAAG,KAAKxB,KAAR,wCAAG,YAAYyB,MAAf,EAAsB;AAAC,aAAKzB,KAAL,CAAW0B,OAAX;AAAqB;;AAC5C,UAAM1B,KAAK,GAAC,KAAKN,KAAL,CAAWiC,GAAX,CAAe3B,KAAf,CAAqB,KAAKL,CAA1B,EAA4B,KAAKC,CAAL,GAAO,EAAnC,EAAsC4B,GAAtC,CAAZ;AACAxB,MAAAA,KAAK,CAAC4B,IAAN,CAAW,IAAX,EAAgB,CAAhB,EAAkB,IAAlB,EAAwBC,cAAxB,CAAuC,KAAKhB,KAAL,GAAW,EAAlD,EAAqD,KAAKC,MAAL,GAAY,CAAjE;AACA,aAAOd,KAAP;AACH;;;WAED,6BAAmB;AAAA;;AACf,UAAM8B,KAAK,GAAE,KAAKpC,KAAL,CAAWqC,GAAX,CAAeC,OAAf,CAAuBC,qBAAvB,CAA6C,KAAKtB,IAAL,CAAUhB,CAAvD,EAAyD,KAAKgB,IAAL,CAAUf,CAAnE,EAAqE,KAAKe,IAAL,CAAUE,KAA/E,EAAqF,KAAKF,IAAL,CAAUG,MAA/F,EAAsG,EAAtG,EAAyG,KAAKpB,KAAL,CAAWwC,OAAX,CAAmBC,IAA5H,EAAiI,KAAKzC,KAAL,CAAWqC,GAAX,CAAeK,SAAhJ,CAAb,CADe,CAEf;;AACAN,MAAAA,KAAK,CAACO,OAAN,CAAc,UAACC,IAAD,EAAQ;AAAC,QAAA,MAAI,CAAC5C,KAAL,CAAWqC,GAAX,CAAeQ,UAAf,CAA0BC,MAA1B,CAAiCC,oBAAjC,CAAsDH,IAAI,CAAC3C,CAA3D,EAA6D2C,IAAI,CAAC1C,CAAlE;AAAqE,OAA5F;AACA8C,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAwBb,KAAxB;AACH;;;EAnC2BvB,MAAM,CAACqC,WAAP,CAAmBC,M","sourcesContent":["import 'phaser'\nimport MapObject from './MapObject'\nimport BaseScene from './BaseScene';\nimport { joegameData } from './joegameData';\nimport Level from './Level';\n\nexport default class TV extends Phaser.GameObjects.Sprite {\n    video: Phaser.GameObjects.Video;\n    scene: Level;\n\n    constructor(scene: BaseScene,x: number, y: number) {\n        super(scene, x, y, joegameData.textures.tv);\n        this.video = this.initVideo('home-movie')\n        this.video.setPipeline(joegameData.globalPipeline)\n        this.setPipeline(joegameData.globalPipeline)\n        this.scene.physics.world.enableBody(this, Phaser.Physics.Arcade.STATIC_BODY)\n        this.body.setSize(this.width-8,this.height/4).setOffset(3,16)\n        this.registerColliders();\n        this.setDepth(700)\n        this.video.setDepth(600)\n\n        this.scene.events.on('create',()=>{this.initColliders()})\n    }\n\n    initColliders(){\n        this.scene.physics.world.addCollider(this,this.scene.npcGroup)\n        this.scene.physics.world.addCollider(this,this.scene.player)\n    }\n\n    initVideo(vid: string): Phaser.GameObjects.Video {\n        if(this.video?.active){this.video.destroy()}\n        const video=this.scene.add.video(this.x,this.y-10,vid)\n        video.play(true,0,3000).setDisplaySize(this.width-10,this.height/2);\n        return video\n    }\n\n    registerColliders(){\n        const tiles =this.scene.map.tilemap.getTilesWithinWorldXY(this.body.x,this.body.y,this.body.width,this.body.height,{},this.scene.cameras.main,this.scene.map.mainLayer)\n        // this.scene.map.highlightTile(11,11)\n        tiles.forEach((tile)=>{this.scene.map.pathfinder.finder.avoidAdditionalPoint(tile.x,tile.y)})\n        console.log(\"TVS TILES\",tiles);\n    }\n}\n"],"file":"TV.js"}
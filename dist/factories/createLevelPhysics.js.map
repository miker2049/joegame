{"version":3,"sources":["../../src/factories/createLevelPhysics.ts"],"names":["level","scene","physics","world","addCollider","npcs","npc1","npc2","machineRegistry","sendTo","name","type","sprite","player","dir","body","touching","map","layers","forEach","l","tilemapLayer"],"mappings":";;;;;;;;;AACA;;AAGe,kBAASA,KAAT,EAAwC;AACnDA,EAAAA,KAAK,CAACC,KAAN,CAAYC,OAAZ,CAAoBC,KAApB,CAA0BC,WAA1B,CAAsCJ,KAAK,CAACK,IAA5C,EAAkDL,KAAK,CAACK,IAAxD,EAA8D,UAACC,IAAD,EAAOC,IAAP,EAAgB;AAC1EP,IAAAA,KAAK,CAACQ,eAAN,CAAsBC,MAAtB,CAA6BH,IAAI,CAACI,IAAL,GAAY,UAAzC,EAAqD;AAAEC,MAAAA,IAAI,EAAE,MAAR;AAAgBC,MAAAA,MAAM,EAAEL;AAAxB,KAArD;AACAP,IAAAA,KAAK,CAACQ,eAAN,CAAsBC,MAAtB,CAA6BF,IAAI,CAACG,IAAL,GAAY,UAAzC,EAAqD;AAAEC,MAAAA,IAAI,EAAE,MAAR;AAAgBC,MAAAA,MAAM,EAAEN;AAAxB,KAArD;AACH,GAHD;;AAIA,MAAIN,KAAK,CAACa,MAAV,EAAkB;AACdb,IAAAA,KAAK,CAACC,KAAN,CAAYC,OAAZ,CAAoBC,KAApB,CAA0BC,WAA1B,CAAsCJ,KAAK,CAACa,MAA5C,EAAoDb,KAAK,CAACK,IAA1D,EAAgE,UAACC,IAAD,EAAOC,IAAP,EAAgB;AAC5EP,MAAAA,KAAK,CAACQ,eAAN,CAAsBC,MAAtB,CAA6B,gBAA7B,EAA+C;AAAEE,QAAAA,IAAI,EAAE,MAAR;AAAgBG,QAAAA,GAAG,EAAE,yBAAWP,IAAI,CAACQ,IAAL,CAAUC,QAArB;AAArB,OAA/C;AACAhB,MAAAA,KAAK,CAACQ,eAAN,CAAsBC,MAAtB,CAA6BF,IAAI,CAACG,IAAL,GAAY,UAAzC,EAAqD;AAAEC,QAAAA,IAAI,EAAE,MAAR;AAAgBC,QAAAA,MAAM,EAAEN;AAAxB,OAArD;AACH,KAHD;AAIH;;AAEDN,EAAAA,KAAK,CAACiB,GAAN,CAAUC,MAAV,CAAiBC,OAAjB,CAAyB,UAACC,CAAD,EAAO;AAC5BpB,IAAAA,KAAK,CAACC,KAAN,CAAYC,OAAZ,CAAoBC,KAApB,CAA0BC,WAA1B,CAAsCgB,CAAC,CAACC,YAAxC,EAAsDrB,KAAK,CAACK,IAA5D,EAAkE,UAACC,IAAD,EAAOC,IAAP,EAAgB;AAC9EP,MAAAA,KAAK,CAACQ,eAAN,CAAsBC,MAAtB,CAA6BH,IAAI,CAACI,IAAL,GAAY,UAAzC,EAAqD;AAAEC,QAAAA,IAAI,EAAE,MAAR;AAAgBC,QAAAA,MAAM,EAAEL;AAAxB,OAArD;AACAP,MAAAA,KAAK,CAACQ,eAAN,CAAsBC,MAAtB,CAA6BF,IAAI,CAACG,IAAL,GAAY,UAAzC,EAAqD;AAAEC,QAAAA,IAAI,EAAE,MAAR;AAAgBC,QAAAA,MAAM,EAAEN;AAAxB,OAArD;AACH,KAHD;;AAIA,QAAIN,KAAK,CAACa,MAAV,EAAkB;AACdb,MAAAA,KAAK,CAACC,KAAN,CAAYC,OAAZ,CAAoBC,KAApB,CAA0BC,WAA1B,CAAsCgB,CAAC,CAACC,YAAxC,EAAsDrB,KAAK,CAACa,MAA5D,EAAoE,UAACP,IAAD,EAAOC,IAAP,EAAgB;AAChFP,QAAAA,KAAK,CAACQ,eAAN,CAAsBC,MAAtB,CAA6BH,IAAI,CAACI,IAAL,GAAY,UAAzC,EAAqD;AAAEC,UAAAA,IAAI,EAAE,MAAR;AAAgBC,UAAAA,MAAM,EAAEL;AAAxB,SAArD;AACAP,QAAAA,KAAK,CAACQ,eAAN,CAAsBC,MAAtB,CAA6B,gBAA7B,EAA+C;AAAEE,UAAAA,IAAI,EAAE,MAAR;AAAgBC,UAAAA,MAAM,EAAEN;AAAxB,SAA/C;AACH,OAHD;AAIH;AAEJ,GAZD;AAcH","sourcesContent":["import { ILevelComponents } from '../ILevel'\nimport touchToDir from '../utils/touchToDir'\n\n\nexport default function(level: ILevelComponents): void {\n    level.scene.physics.world.addCollider(level.npcs, level.npcs, (npc1, npc2) => {\n        level.machineRegistry.sendTo(npc1.name + '_machine', { type: 'BUMP', sprite: npc2 })\n        level.machineRegistry.sendTo(npc2.name + '_machine', { type: 'BUMP', sprite: npc1 })\n    })\n    if (level.player) {\n        level.scene.physics.world.addCollider(level.player, level.npcs, (npc1, npc2) => {\n            level.machineRegistry.sendTo('player_machine', { type: 'BUMP', dir: touchToDir(npc2.body.touching) })\n            level.machineRegistry.sendTo(npc2.name + '_machine', { type: 'BUMP', sprite: npc1 })\n        })\n    }\n\n    level.map.layers.forEach((l) => {\n        level.scene.physics.world.addCollider(l.tilemapLayer, level.npcs, (npc1, npc2) => {\n            level.machineRegistry.sendTo(npc1.name + '_machine', { type: 'BUMP', sprite: npc2 })\n            level.machineRegistry.sendTo(npc2.name + '_machine', { type: 'BUMP', sprite: npc1 })\n        })\n        if (level.player) {\n            level.scene.physics.world.addCollider(l.tilemapLayer, level.player, (npc1, npc2) => {\n                level.machineRegistry.sendTo(npc1.name + '_machine', { type: 'BUMP', sprite: npc2 })\n                level.machineRegistry.sendTo('player_machine', { type: 'BUMP', sprite: npc1 })\n            })\n        }\n\n    })\n\n}\n"],"file":"createLevelPhysics.js"}
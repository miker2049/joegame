{"version":3,"sources":["../../src/factories/createTilemap.ts"],"names":["scene","mapjsonpath","offsetX","offsetY","tilemap","make","key","depthmap","game","registry","get","tilesets","tileset","total","addTilesetImage","name","tileWidth","tileHeight","tileMargin","tileSpacing","layers","forEach","l","i","createLayer","setDepth","createBlankLayer","setVisible","tilemapLayer","setCollisionByProperty","collides"],"mappings":";;;;;;;AAAA;;AACA;;;;;;;;AAEe,kBAASA,KAAT,EAA8BC,WAA9B,EAAmDC,OAAnD,EAAqEC,OAArE,EAAgH;AAC3H,MAAMC,OAAO,GAAGJ,KAAK,CAACK,IAAN,CAAWD,OAAX,CAAmB;AAAEE,IAAAA,GAAG,EAAE,gCAAcL,WAAd;AAAP,GAAnB,CAAhB;AACA,MAAMM,QAAQ,GAAGP,KAAK,CAACQ,IAAN,CAAWC,QAAX,CAAoBC,GAApB,CAAwB,UAAxB,CAAjB,CAF2H,CAG3H;;AAH2H,6CAIvGN,OAAO,CAACO,QAJ+F;AAAA;;AAAA;AAI3H,wDAAsC;AAAA,UAA7BC,OAA6B;;AAClC;AACA,UAAIA,OAAO,CAACC,KAAR,GAAgB,CAApB,EAAuB;AACnBT,QAAAA,OAAO,CAACU,eAAR,CAAwBF,OAAO,CAACG,IAAhC,EAAsCH,OAAO,CAACG,IAA9C,EAAoDH,OAAO,CAACI,SAA5D,EAAuEJ,OAAO,CAACK,UAA/E,EAA2FL,OAAO,CAACM,UAAnG,EAA+GN,OAAO,CAACO,WAAvH;AACH;AACJ,KAT0H,CAU3H;;AAV2H;AAAA;AAAA;AAAA;AAAA;;AAW3Hf,EAAAA,OAAO,CAACgB,MAAR,CAAeC,OAAf,CAAuB,UAACC,CAAD,EAAIC,CAAJ,EAAU;AAC7BnB,IAAAA,OAAO,CAACoB,WAAR,CAAoBF,CAAC,CAACP,IAAtB,EAA4BX,OAAO,CAACO,QAApC,EAA8CT,OAAO,IAAI,CAAzD,EAA4DC,OAAO,IAAI,CAAvE,EAA0EsB,QAA1E,CAAmFlB,QAAQ,CAACG,GAAT,CAAaY,CAAC,CAACP,IAAf,KAAwB,CAA3G;AACH,GAFD;AAGAX,EAAAA,OAAO,CAACsB,gBAAR,CAAyB,WAAzB,EAAsCtB,OAAO,CAACO,QAA9C,EAAwDgB,UAAxD,CAAmE,IAAnE,EAd2H,CAgB3H;;AACAvB,EAAAA,OAAO,CAACgB,MAAR,CAAeC,OAAf,CAAuB,UAACC,CAAD,EAAO;AAAEA,IAAAA,CAAC,CAACM,YAAF,CAAeC,sBAAf,CAAsC;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KAAtC;AAA2D,GAA3F;AACA,SAAO1B,OAAP;AACH","sourcesContent":["import 'phaser'\nimport { getMapKeyName } from '../utils/getKeyNames'\n\nexport default function(scene: Phaser.Scene, mapjsonpath: string, offsetX?: number, offsetY?: number): Phaser.Tilemaps.Tilemap {\n    const tilemap = scene.make.tilemap({ key: getMapKeyName(mapjsonpath) })\n    const depthmap = scene.game.registry.get('depthmap')\n    //initialize tilesets, and also leave a reference to them so they can easily be used in making the layers\n    for (let tileset of tilemap.tilesets) {\n        // Note that here, to keep things simpler, every tileset is preloaded with the name of the filename itself, so two `tileset.name`s\n        if (tileset.total > 1) {\n            tilemap.addTilesetImage(tileset.name, tileset.name, tileset.tileWidth, tileset.tileHeight, tileset.tileMargin, tileset.tileSpacing);\n        }\n    }\n    // init all our layers...\n    tilemap.layers.forEach((l, i) => {\n        tilemap.createLayer(l.name, tilemap.tilesets, offsetX || 0, offsetY || 0).setDepth(depthmap.get(l.name) || 0)\n    })\n    tilemap.createBlankLayer('highlight', tilemap.tilesets).setVisible(true)\n\n    // collision for map\n    tilemap.layers.forEach((l) => { l.tilemapLayer.setCollisionByProperty({ collides: true }) })\n    return tilemap\n}\n"],"file":"createTilemap.js"}